## 1. 背景

	在嵌入式开发中调试器起着非常大的作用，下载程序、单步调试程序、下断点、通过函数调用栈查看函数调用关系等。通常我们不关心调试器的工作原理，只管调试就好，但是底层原理的认知是非常重要的，本文将打开一大块知识拼图。

### 2. GDB 是什么

	GDB 是 gcc 工具链带的一个调试程序。

### 3. GDB 作用
1. GDB 是程序，在大型操作系统中，如 linux、windows 等，通常直接运行 gdb 程序调试代码。gdb 能够将可执行程序装载进来单步控制可执行程序的行为。但是在嵌入式中，嵌入式系统通常资源薄弱，运行不起来 gdb 程序，因此可以通过 gdb 连接 pc 上的服务程序，通过给服务程序发送相关指令，服务程序将指令通过usb 数据线发送给调试器，最后调试器控制嵌入式芯片的行为。

2. 经常用的 Jlink，ST-link 等调试工具，一般都用自己的 gdb server 程序运行在 pc 上，因此，gdb 与 调试器配套的 server 程序就能建立连接，一般使用过 tcp 协议连接，传输内容为明文传输，可抓包直接查看数据。连接成功后，server 将 gdb 发来的命令进行解释，然后发给调试器，调试器将命令解释最后产生相关波形给单片机的调试单元

### 4. GDB 相关命令

```c
gdb xxx.elf  // client 端载入符号表

target remote ip:port // 连接 Server
    
load xxx.elf // 将 elf load 到 Server 端，相当于给板子重新下载程序

b xxx // 在xxx 出下断点
    
c // 全速运行，遇到断点停止

bt // 显示函数调用栈
.
.
.
.   
.
```